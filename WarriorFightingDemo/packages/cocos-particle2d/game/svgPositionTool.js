const ChromaJs=require("chroma-js");module.exports={draw:null,init(e){this.draw=e;let o=this._createPositionArrow("#ff0000",function(e){let o=r.x(),t=r.y(),n={x:e.movementX+o,y:t};r.move(n.x,n.y),window.particle.svgMove(n)}).move(20,0),t=this._createPositionArrow("#00ff00",function(e){let o=r.x(),t=r.y(),n={x:o,y:e.movementY+t};r.move(n.x,n.y),window.particle.svgMove(n)}).move(0,-20).rotate(-90,0,0),n=this._createRect(function(e){e.offsetX,e.offsetY,e.clientX,e.clientY;let o=e.movementX,t=e.movementY,n=r.x(),i=r.y(),s={x:o+n,y:t+i};r.move(s.x,s.y),window.particle.svgMove(s)}),r=this.draw.group();return r.add(o),r.add(t),r.add(n),r},_createPositionArrow(e,o){let t=!1,n="#ffff00",r=this.draw.group(),i=this.draw.line(0,0,80,0).stroke({width:1,color:e}).attr({fill:e}),s=this.draw.polyline("80,5,80,-5,95,0").fill(e).stroke({width:1,color:e});function u(e){i.stroke({color:e}),s.fill(e).stroke({color:e})}function m(e){o&&o(e)}function c(){t=!1,u(e),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",c)}return r.add(i),r.add(s),r.on("mouseover",function(){u(ChromaJs(e).brighter().hex())}),r.on("mouseout",function(){t||u(e)}),r.on("mousedown",function(){t=!0,u(n),document.addEventListener("mouseup",c),document.addEventListener("mousemove",m)}),r},_createRect(e){let o=!1,t="#0055ff",n="#ffff00",r=this.draw.rect(20,20).attr({fill:t,"fill-opacity":.4}).stroke({width:1,color:t}).move(0,-20);function i(){o=!1,r.stroke({color:t}).attr({fill:t}),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",s)}function s(o){e&&e(o)}return r.on("mousedown",function(){o=!0,r.stroke({color:n}).attr({fill:n}),document.addEventListener("mouseup",i),document.addEventListener("mousemove",s)}),r.on("mouseover",function(){let e=ChromaJs(t).brighter().hex();r.stroke({color:e}).attr({fill:e})}),r.on("mouseout",function(){o||r.stroke({color:t}).attr({fill:t})}),r}};